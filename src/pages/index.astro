---
import Layout from '~/layouts/PageLayout.astro'

const metadata = {
  title: 'TNX6 â€” Twitch Streamer',
  ignoreTitleTemplate: true,
}
---

<Layout metadata={metadata}>
  <section class="relative text-center text-white py-24 px-6 bg-gradient-to-b from-black/60 to-transparent">
    <div class="max-w-5xl mx-auto">
      <div class="flex items-center justify-center gap-3 mb-6">
        <iconify-icon icon="tabler:brand-twitch" class="text-[#a67c00] text-5xl"></iconify-icon>
        <h1 class="text-5xl font-extrabold tracking-wide bg-gradient-to-r from-[#ffda6a] to-[#c29200] bg-clip-text text-transparent drop-shadow-lg">
          TNX
        </h1>
      </div>

      <p class="text-lg text-gray-200 mb-10">Ø£Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ØªØ¹Ø©ØŒ Ø§Ù„Ø¶Ø­ÙƒØŒ ÙˆØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹â€¦ ÙˆØ£Ø¨Ø« ÙŠÙˆÙ…ÙŠÙ‹Ø§</p>

      <div class="flex flex-wrap justify-center gap-4">
        <a
          href="https://www.twitch.tv/tnx_6"
          target="_blank"
          class="px-8 py-3 rounded-lg text-black font-semibold bg-gradient-to-r from-[#ffda6a] to-[#c29200] hover:opacity-90 transition"
        >
          Follow on Twitch
        </a>
        <a
          href="https://linktr.ee/TNX6"
          target="_blank"
          class="px-8 py-3 rounded-lg border border-[#c29200] text-[#ffda6a] hover:bg-[#c29200]/10 transition"
        >
          All Links
        </a>
      </div>

      <div class="relative w-full max-w-4xl mx-auto aspect-video rounded-2xl overflow-hidden shadow-2xl mt-16 border border-[#c29200]/40">
        <iframe
          src="https://player.twitch.tv/?channel=tnx_6&parent=tnx6.xyz"
          allowfullscreen
          frameborder="0"
          scrolling="no"
          width="100%"
          height="100%"
        ></iframe>
      </div>

      <!-- ğŸ”´ ÙƒØ¨Ø³ÙˆÙ„Ø© Ø§Ù„Ø¨Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… / Ø§Ù„Ø¨Ø« Ø´ØºÙ‘Ø§Ù„ -->
      <div class="mt-6 flex justify-center">
        <div
          class="inline-flex items-center gap-3 rounded-full border border-purple-500/60 bg-slate-950/80 px-4 py-2 text-xs md:text-sm shadow-[0_0_20px_rgba(15,23,42,0.9)]"
        >
          <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø³Ø§Ø¹Ø© -->
          <span
            class="inline-flex h-6 w-6 items-center justify-center rounded-full border border-purple-400/70 text-[11px] text-purple-300"
          >
            â°
          </span>

          <!-- Ø§Ù„Ù†Øµ Ø§Ù„Ù„ÙŠ ÙŠØªØºÙŠÙ‘Ø± -->
          <span id="next-stream-label" class="text-slate-200">
            Ø§Ù„Ø¨Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… Ø®Ù„Ø§Ù„:
          </span>

          <!-- Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ (Ø£Ùˆ ÙØ§Ø¶ÙŠ Ù„Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ø¨Ø« Ø´ØºØ§Ù„) -->
          <span
            id="next-stream-timer"
            class="font-mono text-sm md:text-base font-semibold text-purple-300"
          >
            -- : -- : --
          </span>
        </div>
      </div>
    </div>
  </section>

  <section class="relative py-24 px-6 text-white bg-black/70">
    <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-16 items-center">

      <img
        src="/TEST/assets/images/tnx-min.jpg"
        alt="TNX6 Twitch Avatar"
        class="rounded-2xl w-full max-w-sm mx-auto border border-[#c29200]/40 shadow-lg object-cover"
        width="300"
        height="300"
        loading="lazy"
      />

      <div>
        <h2 class="text-3xl font-bold mb-6 bg-gradient-to-r from-[#ffda6a] to-[#c29200] bg-clip-text text-transparent">
          About TNX6
        </h2>

        <p class="text-gray-200 mb-8 text-lg leading-relaxed">
          <strong class="text-[#ffda6a]">TNX</strong> is the best streamer Twitch has ever seen â€”
          insanely skilled, handsome and loved by everyone.
        </p>

        <ul class="space-y-4 text-gray-300">
          <li class="flex items-start gap-3">
            <iconify-icon icon="tabler:bolt" class="text-[#c29200] text-xl mt-1"></iconify-icon>
            Interactive Streams - crazy integrations, games and features.
          </li>
          <li class="flex items-start gap-3">
            <iconify-icon icon="tabler:medal" class="text-[#c29200] text-xl mt-1"></iconify-icon>
            Custom user cards with INSANE badges you can earn via challenges.
          </li>
          <li class="flex items-start gap-3">
            <iconify-icon icon="tabler:users" class="text-[#c29200] text-xl mt-1"></iconify-icon>
            You better join the community NOW or else...
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ğŸ§  Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø«: Ù…Ù† 8:30 Ù… Ø¥Ù„Ù‰ 2:00 Øµ Ø§Ù„Ø¨Ø« "Ø´ØºÙ‘Ø§Ù„"ØŒ ØºÙŠØ± ÙƒØ°Ø§ Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ -->
  <script>
    // ÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¨Ø« Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙˆÙ†Ù‡Ø§ÙŠØªÙ‡
    const STREAM_START_HOUR = 20; // 20 = 8 Ù…Ø³Ø§Ø¡Ù‹
    const STREAM_START_MIN = 30;  // :30
    const STREAM_DURATION_MS = (5 * 60 + 30) * 60 * 1000; // 5.5 Ø³Ø§Ø¹Ø§Øª = Ù„Ø­Ø¯ 2:00 Øµ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹

    function getTodayStart(now) {
      const d = new Date(now);
      d.setHours(STREAM_START_HOUR, STREAM_START_MIN, 0, 0);
      return d;
    }

    function isLiveNow(now) {
      // Ù†Ø­ØªØ§Ø¬ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø§ÙØ°Ø© Ø§Ù„ÙŠÙˆÙ… ÙˆÙ†Ø§ÙØ°Ø© Ø£Ù…Ø³ (Ø¹Ø´Ø§Ù† Ø§Ù„ÙØªØ±Ø© Ø¨Ø¹Ø¯ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„ Ø¥Ù„Ù‰ 2 Øµ)
      const startToday = getTodayStart(now);
      const endToday = new Date(startToday.getTime() + STREAM_DURATION_MS);

      const startYesterday = new Date(startToday.getTime() - 24 * 60 * 60 * 1000);
      const endYesterday = new Date(startYesterday.getTime() + STREAM_DURATION_MS);

      return (
        (now >= startYesterday && now < endYesterday) ||
        (now >= startToday && now < endToday)
      );
    }

    function getNextStreamStart(now) {
      const startToday = getTodayStart(now);
      const endToday = new Date(startToday.getTime() + STREAM_DURATION_MS);

      // Ù„Ùˆ Ù„Ø³Ø§ Ù…Ø§ ÙˆØµÙ„Ù†Ø§ Ù„Ù€ 8:30 Ø§Ù„ÙŠÙˆÙ… â†’ ÙŠÙƒÙˆÙ† Ø§Ù„Ù‡Ø¯Ù Ø§Ù„ÙŠÙˆÙ…
      if (now < startToday) {
        return startToday;
      }

      // Ù„Ùˆ Ø¨Ø¹Ø¯ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¨Ø« (Ø¨Ø¹Ø¯ 2:00 Øµ) â†’ Ø§Ù„Ù‡Ø¯Ù 8:30 Ø­Ù‚ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø§ÙŠ
      if (now >= endToday) {
        const startTomorrow = new Date(startToday.getTime() + 24 * 60 * 60 * 1000);
        return startTomorrow;
      }

      // Ø§Ù„Ø¨Ø§Ù‚ÙŠ ÙŠØªØºØ·Ù‰ ÙÙŠ isLiveNowØŒ Ù‡Ù†Ø§ Ø¨Ø³ Ø§Ø­ØªÙŠØ§Ø·
      return startToday;
    }

    function startNextStreamLogic() {
      const labelEl = document.getElementById('next-stream-label');
      const timerEl = document.getElementById('next-stream-timer');
      if (!labelEl || !timerEl) return;

      function update() {
        const now = new Date();

        if (isLiveNow(now)) {
          // ğŸ¥ Ø§Ù„Ø¨Ø« Ø´ØºØ§Ù„ Ø§Ù„Ø¢Ù†
          labelEl.textContent = 'Ø§Ù„Ø¨Ø« Ø´ØºÙ‘Ø§Ù„ Ø§Ù„Ø¢Ù† â€” Ø§Ù†Ø¶Ù… Ù„Ù„Ø¨Ø« ğŸ”´';
          timerEl.textContent = '';
          return;
        }

        // â³ Ø§Ù„Ø¨Ø« Ù…Ùˆ Ø´ØºØ§Ù„ â†’ Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„ÙˆÙ‚Øª Ø§Ù„Ø¬Ø§ÙŠ
        const next = getNextStreamStart(now);
        const diff = Math.max(0, next - now);
        const totalSeconds = Math.floor(diff / 1000);

        const h = Math.floor(totalSeconds / 3600);
        const m = Math.floor((totalSeconds % 3600) / 60);
        const s = totalSeconds % 60;

        labelEl.textContent = 'Ø§Ù„Ø¨Ø« Ø§Ù„Ù‚Ø§Ø¯Ù… Ø®Ù„Ø§Ù„:';
        timerEl.textContent =
          String(h).padStart(2, '0') + ' : ' +
          String(m).padStart(2, '0') + ' : ' +
          String(s).padStart(2, '0');
      }

      update();
      setInterval(update, 1000);
    }

    if (typeof window !== 'undefined') {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startNextStreamLogic);
      } else {
        startNextStreamLogic();
      }
    }
  </script>
</Layout>
